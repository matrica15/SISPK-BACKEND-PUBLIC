@{
    var Detail = ViewBag.DataProposal;
    var Lampiran = ViewBag.Lampiran;
    var Bukti = ViewBag.Bukti;
    var Surat = ViewBag.Surat;
    var Outline = ViewBag.Outline;
}
<style>
    .select2-selection--single {
        height: 100% !important;
    }

    .select2-selection__rendered {
        word-wrap: break-word !important;
        text-overflow: inherit !important;
        white-space: normal !important;
    }
</style>
<div class="row">
    <div class="col-md-12">
        <!-- BEGIN PORTLET-->
        <div class="portlet box green">
            <div class="portlet-title">
                <div class="caption">
                    <i class="fa fa-gift"></i>Form Pengesahan Usulan
                </div>
            </div>
            <div class="portlet-body form">
                <!-- BEGIN FORM-->
                <form class="form-horizontal form-bordered" id="sispk_form" action="/Pengajuan/Usulan/Create" method="post" enctype="multipart/form-data" target="_blank">
                    <div class="form-body">
                        @if (Detail.PROPOSAL_NO_SNI_PROPOSAL != null)
                        {
                            <div class="form-group">
                                <label class="control-label col-md-3">Nomor</label>
                                <div class="col-md-9 control-label detailtext">
                                    @((Detail.PROPOSAL_NO_SNI_PROPOSAL == null) ? "-" : Detail.PROPOSAL_NO_SNI_PROPOSAL)
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-md-3">Judul</label>
                                <div class="col-md-9 control-label detailtext">
                                    @((Detail.PROPOSAL_NO_SNI_PROPOSAL == null) ? "-" : Detail.PROPOSAL_JUDUL_SNI_PROPOSAL)
                                </div>
                            </div>
                        }
                        @if (Detail.PROPOSAL_TYPE == 1)
                        {
                            <div class="form-group">
                                <label class="control-label col-md-3">Komite Teknis / Subkomite Teknis</label>
                                <div class="col-md-9 control-label detailtext">
                                    @((Detail.KOMTEK_CODE == null) ? "-" : Detail.KOMTEK_CODE + ". " + Detail.KOMTEK_NAME)
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-md-3">Konseptor</label>
                                <div class="col-md-9 control-label detailtext">
                                    @((Detail.PROPOSAL_KONSEPTOR == null) ? "-" : Detail.PROPOSAL_KONSEPTOR)
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-md-3">Institusi Konseptor</label>
                                <div class="col-md-9 control-label detailtext">
                                    @((Detail.PROPOSAL_INSTITUSI == null) ? "-" : Detail.PROPOSAL_INSTITUSI)
                                </div>
                            </div>
                        }
                        else
                        {
                            <div class="form-group">
                                <label class="control-label col-md-3">Nama</label>
                                <div class="col-md-9 control-label detailtext">
                                    @((Detail.PROPOSAL_TIM_NAMA == null) ? "-" : Detail.PROPOSAL_TIM_NAMA)
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-md-3">Institusi</label>
                                <div class="col-md-9 control-label detailtext">
                                    @((Detail.PROPOSAL_INSTITUSI == null) ? "-" : Detail.PROPOSAL_INSTITUSI)
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-md-3">Alamat</label>
                                <div class="col-md-9 control-label detailtext">
                                    @((Detail.PROPOSAL_TIM_ALAMAT == null) ? "-" : Detail.PROPOSAL_TIM_ALAMAT)
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-md-3">Telepon</label>
                                <div class="col-md-9 control-label detailtext">
                                    @((Detail.PROPOSAL_TIM_PHONE == null) ? "-" : Detail.PROPOSAL_TIM_PHONE)
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-md-3">Email</label>
                                <div class="col-md-9 control-label detailtext">
                                    @((Detail.PROPOSAL_TIM_EMAIL == null) ? "-" : Detail.PROPOSAL_TIM_EMAIL)
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-md-3">Fax</label>
                                <div class="col-md-9 control-label detailtext">
                                    @((Detail.PROPOSAL_TIM_FAX == null) ? "-" : Detail.PROPOSAL_TIM_FAX)
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-md-3">Komite Teknis / Subkomite Teknis</label>
                                <div class="col-md-9 control-label detailtext">
                                    @((Detail.PROPOSAL_KOMTEK_ID == null) ? "Komtek Belum Ditetapkan" : Detail.KOMTEK_CODE + ". " + Detail.KOMTEK_NAME)
                                </div>
                            </div>
                        }
                        @if (ViewBag.ICS.Count > 0)
                        {
                            <div class="form-group">
                                <label class="control-label col-md-3">ICS</label>
                                <div class="col-md-9" style="padding-top: 20px">
                                    <div class="detailtext">
                                        <ol style="padding-left: 15px;">
                                            @foreach (var an in ViewBag.ICS)
                                            {
                                                <li>@an.ICS_CODE @((an.ICS_NAME_IND == null) ? an.ICS_NAME : an.ICS_NAME_IND)</li>
                                            }
                                        </ol>
                                    </div>
                                </div>
                            </div>
                        }
                        <div class="form-group">
                            <label class="control-label col-md-3">Judul PNPS</label>
                            <div class="col-md-9 control-label detailtext">
                                @((Detail.PROPOSAL_JUDUL_PNPS == null) ? "-" : Detail.PROPOSAL_JUDUL_PNPS)
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3">Ruang Lingkup</label>
                            <div class="col-md-9 control-label detailtext">
                                @((Detail.PROPOSAL_RUANG_LINGKUP == null) ? "-" : Detail.PROPOSAL_RUANG_LINGKUP)
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3">Jenis Perumusan SNI</label>
                            <div class="col-md-9 control-label detailtext">
                                @((Detail.PROPOSAL_JENIS_PERUMUSAN_NAME == null) ? "-" : Detail.PROPOSAL_JENIS_PERUMUSAN_NAME)
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3">Jalur Perumusan SNI</label>
                            <div class="col-md-9 control-label detailtext">
                                @((Detail.PROPOSAL_JALUR == null) ? "-" : Detail.PROPOSAL_JALUR_NAME)
                            </div>
                        </div>
                        @if (Detail.PROPOSAL_JALUR == 2)
                        {
                            <div class="form-group">
                                <label class="control-label col-md-3">Jenis Adopsi</label>
                                <div class="col-md-9 control-label detailtext">
                                    @((Detail.PROPOSAL_JENIS_ADOPSI == null) ? "-" : Detail.PROPOSAL_JENIS_ADOPSI_NAME)
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-md-3">Metode Adopsi</label>
                                <div class="col-md-9 control-label detailtext">
                                    @((Detail.PROPOSAL_METODE_ADOPSI == null) ? "-" : Detail.PROPOSAL_METODE_ADOPSI_NAME)
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-md-3">Standar ISO/IEC/SDO lain yang akan diadopsi secara <b>@((Detail.PROPOSAL_JENIS_ADOPSI_NAME == null) ? "-" : Detail.PROPOSAL_JENIS_ADOPSI_NAME)</b></label>
                                <div class="col-md-9" style="padding-top: 20px">
                                    <div class="detailtext">
                                        @if (ViewBag.AdopsiList != null)
                                        {
                                            <ol style="padding-left: 15px;">
                                                @foreach (var ad in ViewBag.AdopsiList)
                                                {
                                                    <li>@ad.PROPOSAL_ADOPSI_NOMOR_JUDUL</li>
                                                }
                                            </ol>
                                        }
                                        else
                                        {
                                            <span>-</span>
                                        }
                                    </div>
                                </div>
                            </div>
                        }
                        @if (Detail.PROPOSAL_JENIS_PERUMUSAN == 2)
                        { 
                            <div class="form-group revisi_list">
                                <label class="control-label col-md-3">Nomor Judul SNI yang akan di Revisi</label>
                                <div class="col-md-9" style="padding-top: 20px">
                                    <div class="detailtext">
                                        @if (ViewBag.RevisiList != null)
                                        {
                                            <ol style="padding-left: 15px;">
                                                @foreach (var rl in ViewBag.RevisiList)
                                                {
                                                    <li>@rl.TEXT</li>
                                                }
                                            </ol>
                                        }
                                        else
                                        {
                                            <span>-</span>
                                        }
                                    </div>
                                </div>
                            </div>
                        }
                        else if (Detail.PROPOSAL_JENIS_PERUMUSAN == 3)
                        {
                            <div class="form-group ralat_list">
                                <label class="control-label col-md-3">Nomor Judul SNI yang akan di Ralat</label>
                                <div class="col-md-9 control-label detailtext">
                                    @((Detail.PROPOSAL_RALAT_SNI_ID == null) ? "-" : Detail.PROPOSAL_RALAT_NOMOR + ", " + Detail.PROPOSAL_RALAT_JUDUL)
                                </div>
                            </div>
                        }
                        else if (Detail.PROPOSAL_JENIS_PERUMUSAN == 4)
                        {
                            <div class="form-group amd_list">
                                <label class="control-label col-md-3">Nomor Judul SNI yang akan di Amandemen</label>
                                <div class="col-md-9 control-label detailtext">
                                    @((Detail.PROPOSAL_AMD_SNI_ID == null) ? "-" : Detail.PROPOSAL_AMD_NOMOR + ", " + Detail.PROPOSAL_AMD_JUDUL)
                                </div>
                            </div>
                        }
                        else if (Detail.PROPOSAL_JENIS_PERUMUSAN == 5)
                        {
                            <div class="form-group terjemahan_list">
                                <label class="control-label col-md-3">Nomor Judul SNI yang akan di Terjemahkan</label>
                                <div class="col-md-9 control-label detailtext">
                                    @((Detail.PROPOSAL_TERJEMAHAN_SNI_ID == null) ? "-" : Detail.PROPOSAL_TERJEMAHAN_NOMOR + ", " + Detail.PROPOSAL_TERJEMAHAN_JUDUL)
                                </div>
                            </div>
                        }
                        @if (Detail.PROPOSAL_JALUR > 1)
                        { 
                            <div class="form-group pasal_list">
                                <label class="control-label col-md-3">Pasal SNI yang di <span class="pasal_list_name"></span></label>
                                <div class="col-md-9 control-label detailtext">
                                    @((Detail.PROPOSAL_PASAL == null) ? "-" : Detail.PROPOSAL_PASAL)
                                </div>
                            </div>
                        }
                        <div class="form-group">
                            <label class="control-label col-md-3">Kebutuhan Mendesak</label>
                            <div class="col-md-9 control-label detailtext">
                                @((Detail.PROPOSAL_IS_URGENT == null) ? "-" : Detail.PROPOSAL_IS_URGENT_NAME)
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3">Terdapat isi dari standar yang terkait dengan hak paten ?</label>
                            <div class="col-md-9 control-label detailtext">
                                @((Detail.PROPOSAL_IS_HAK_PATEN == 1) ? "Ya" : "Tidak")
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3">File Hak Paten</label>
                            <div class="col-md-9 control-label detailtext">
                                @((Detail.PROPOSAL_HAK_PATEN_NAME == null) ? "-" : Html.Raw("<a href='" + Detail.PROPOSAL_HAK_PATEN_LOCATION + "" + Detail.PROPOSAL_HAK_PATEN_NAME + "' target='_blank'> Download File Hak Paten </a>"))
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3">Informasi Hak Paten</label>
                            <div class="col-md-9 control-label detailtext">
                                @((Detail.PROPOSAL_IS_HAK_PATEN_DESC == null) ? "-" : Detail.PROPOSAL_IS_HAK_PATEN_DESC)
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3">Informasi detail hasil penelitian atau kajian terhadap SNI</label>
                            <div class="col-md-9 control-label detailtext">
                                @((Detail.PROPOSAL_INFORMASI == null) ? "-" : Detail.PROPOSAL_INFORMASI)
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3">Lampiran Informasi detail hasil penelitian atau kajian terhadap SNI</label>
                            <div class="col-md-9 control-label detailtext">
                                @((Lampiran == null) ? "-" : Html.Raw("<a href='" + Lampiran.DOC_FILE_PATH + "" + Lampiran.DOC_FILE_NAME + "." + Lampiran.DOC_FILETYPE + "' target='_blank'>" + Lampiran.DOC_NAME + "</a>"))
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3">Tujuan dan alasan spesifik mengenai perumusan yang akan dilakukan</label>
                            <div class="col-md-9 control-label detailtext">
                                @((Detail.PROPOSAL_TUJUAN == null) ? "-" : Html.Raw(Detail.PROPOSAL_TUJUAN))
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3">Kesesuaian dengan program pemerintah (sebutkan secara terperinci)</label>
                            <div class="col-md-9 control-label detailtext">
                                @((Detail.PROPOSAL_PROGRAM_PEMERINTAH == null) ? "-" : Html.Raw(Detail.PROPOSAL_PROGRAM_PEMERINTAH))
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3">Pihak-pihak utama yang Berkepentingan</label>
                            <div class="col-md-9 control-label detailtext" style="padding-top: 20px">
                                @if (Detail.PROPOSAL_PIHAK_BERKEPENTINGAN != null)
                                {
                                    string[] PROPOSAL_PIHAK_BERKEPENTINGAN = Detail.PROPOSAL_PIHAK_BERKEPENTINGAN.Split('|');
                                    if (PROPOSAL_PIHAK_BERKEPENTINGAN.Count() > 0)
                                    {
                                    <ol style="padding-left: 15px;">
                                        @foreach (string PPB in PROPOSAL_PIHAK_BERKEPENTINGAN)
                                        {
                                            <li>@PPB</li> 
                                        }
                                    </ol>
                                    }
                                    else
                                    {
                                    <span>-</span>
                                    }
                                }
                                else
                                {
                                    <span>-</span>
                                }
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3">Manfaat yang akan didapatkan dengan menerapkan SNI yang diusulkan</label>
                            <div class="col-md-9 control-label detailtext">
                                @((Detail.PROPOSAL_MANFAAT_PENERAPAN == null) ? "-" : Html.Raw(Detail.PROPOSAL_MANFAAT_PENERAPAN))
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3">Apakah terdapat organisasi yang mendukung usulan perumusan standar ini?</label>
                            <div class="col-md-9 control-label detailtext">
                                @((Detail.PROPOSAL_IS_ORG_MENDUKUNG == 1) ? "Ya" : "Tidak")
                            </div>
                        </div>
                        @if (Detail.PROPOSAL_IS_ORG_MENDUKUNG == 1)
                        { 
                            <div class="form-group">
                                <label class="control-label col-md-3">Lampirkan bukti dukungan terhadap usulan perumusan standar ini (misalnya surat).</label>
                                <div class="col-md-9 control-label detailtext">
                                    @((Bukti == null) ? "-" : Html.Raw("<a href='" + Bukti.DOC_FILE_PATH + "" + Bukti.DOC_FILE_NAME + "." + Bukti.DOC_FILETYPE + "' target='_blank'>" + Bukti.DOC_NAME + "</a>"))
                                </div>
                            </div>
                        }
                        <div class="form-group">
                            <label class="control-label col-md-3">SNI Acuan Normatif</label>
                            <div class="col-md-9" style="padding-top: 20px">
                                <div class="detailtext">
                                    @if (ViewBag.AcuanNormatif.Count > 0)
                                    {
                                        <ol style="padding-left: 15px;">
                                            @foreach (var an in ViewBag.AcuanNormatif)
                                            {
                                                <li>@an.PROPOSAL_REF_JOIN</li>
                                            }
                                        </ol>
                                    }
                                    else
                                    {
                                        <span>-</span>
                                    }
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3">Acuan Non SNI</label>
                            <div class="col-md-9" style="padding-top: 20px">
                                <div class="detailtext">
                                    @if (ViewBag.AcuanNonNormatif.Count > 0)
                                    {
                                        <ol style="padding-left: 15px;">
                                            @foreach (var an in ViewBag.AcuanNonNormatif)
                                            {
                                                <li>@an.PROPOSAL_REF_JOIN</li>
                                            }
                                        </ol>
                                    }
                                    else
                                    {
                                        <span>-</span>
                                    }
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3">Bibliografi</label>
                            <div class="col-md-9" style="padding-top: 20px">
                                <div class="detailtext">
                                    @if (ViewBag.Bibliografi.Count > 0)
                                    {
                                        <ol style="padding-left: 15px;">
                                            @foreach (var an in ViewBag.Bibliografi)
                                            {
                                                <li>@an.PROPOSAL_REF_JOIN</li>
                                            }
                                        </ol>
                                    }
                                    else
                                    {
                                        <span>-</span>
                                    }
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3">Surat Pengajuan PNPS</label>
                            <div class="col-md-9 control-label detailtext">
                                @((Surat == null) ? "-" : Html.Raw("<a href='" + Surat.DOC_FILE_PATH + "" + Surat.DOC_FILE_NAME + "." + Surat.DOC_FILETYPE + "' target='_blank'>" + Surat.DOC_NAME + "</a>"))
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3">Outline RSNI</label>
                            <div class="col-md-9 control-label detailtext">
                                @((Outline == null) ? "-" : Html.Raw("<a href='" + Outline.DOC_FILE_PATH + "" + Outline.DOC_FILE_NAME + "." + Outline.DOC_FILETYPE + "' target='_blank'>" + Outline.DOC_NAME + "</a>"))
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3">Apakah kegiatan perumusan standar ini menjadi atau akan menjadi subyek regulasi atau berhubungan dengan regulasi yang telah ada ?</label>
                              <div class="col-md-9 control-label detailtext">
                                @if (Detail.PROPOSAL_RETEK_ID != null)
{
    <ol style="padding-left: 15px;">
        @{string[] STRRETEK = Detail.PROPOSAL_RETEK_ID.Split(';');
          foreach (string RTK in STRRETEK)
          {
            <li>@RTK</li>   
          }
        }
    </ol>
}
else
{
    <span>-</span>
}
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3">Sebutkan LPK yang potensial dalam penerapan SNI yang diusulkan</label>
                              <div class="col-md-9 control-label detailtext">
                                @if (Detail.PROPOSAL_LPK_ID != null)
{
    <ol style="padding-left: 15px;">
        @{string[] STRLPK = Detail.PROPOSAL_LPK_ID.Split(';');
          foreach (string LPK in STRLPK)
          {
            <li>@LPK</li>     
          }
        }
    </ol>
}
else
{
    <span>-</span>
}
                            </div>
                        </div>
                        <div class="form-actions">
                            <div class="row">
                                <div class="col-md-offset-3 col-md-9">
                                    <a class="btn green btn_approval" href="javascript:void(0)" onclick="setujuiulusan(@Detail.PROPOSAL_ID)">Disetujui</a> <a class="btn red btn_approval" href="javascript:void(0)" onclick="tolakulusan(@Detail.PROPOSAL_ID)">Ditolak</a> <a class="btn blue " href="@Url.Action("Index")">Kembali</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
                <!-- END FORM-->
            </div>
        </div>
        <!-- END PORTLET-->
    </div>
</div>


<script type="text/javascript">

    function pilih_jenis_perumusan(ini) {
        var res = parseInt($(ini).val());
        var name = $(ini).find('option:selected').html();
        $(".pasal_list").slideDown("fast", function () {
            $('.pasal_list_name').html(name);
        });
        if (res == 1) {
            $(".revisi_list").slideUp("fast");
            $(".ralat_list").slideUp("fast");
            $(".amd_list").slideUp("fast");
            $(".terjemahan_list").slideUp("fast");
            $('.pasal_list').slideUp("fast");
        } else if (res == 2) {
            $(".revisi_list").slideDown("fast");
            $(".ralat_list").slideUp("fast");
            $(".amd_list").slideUp("fast");
            $(".terjemahan_list").slideUp("fast");
        } else if (res == 3) {
            $(".ralat_list").slideDown("fast");
            $(".revisi_list").slideUp("fast");
            $(".amd_list").slideUp("fast");
            $(".terjemahan_list").slideUp("fast");
        } else if (res == 4) {
            $(".amd_list").slideDown("fast");
            $(".ralat_list").slideUp("fast");
            $(".revisi_list").slideUp("fast");
            $(".terjemahan_list").slideUp("fast");
        } else if (res == 5) {
            $(".terjemahan_list").slideDown("fast");
            $(".amd_list").slideUp("fast");
            $(".ralat_list").slideUp("fast");
            $(".revisi_list").slideUp("fast");
        } else {
            $(".revisi_list").slideUp("fast");
            $(".ralat_list").slideUp("fast");
            $(".amd_list").slideUp("fast");
            $(".terjemahan_list").slideUp("fast");
        }

        if (res == 5) {
            $('#PROPOSAL_JALUR').select2("destroy");
            $("#PROPOSAL_JALUR option[value='2']").attr("disabled", "disabled");
            $('#PROPOSAL_JALUR').select2();
            $('#PROPOSAL_JALUR').val("1").trigger("change");
        } else {
            $('#PROPOSAL_JALUR').select2("destroy");
            $("#PROPOSAL_JALUR option[value='2']").removeAttr("disabled");
            $('#PROPOSAL_JALUR').val("");
            $('#PROPOSAL_JALUR').select2();
        }
    }
    function pilih_jalur(ini) {
        var jalur_perumusan = parseInt($(ini).val());
        var jenis_perumusan = parseInt($('#PROPOSAL_JENIS_PERUMUSAN').val());
        $('#PROPOSAL_JENIS_ADOPSI').select2({
            width: '100%',
            placeholder: "Pilih",
            allowClear: false
        }).val("");
        $('#PROPOSAL_METODE_ADOPSI').select2({
            width: '100%',
            placeholder: "Pilih",
            allowClear: false
        }).val("");
        $(".daftar_adopsi_ext").hide();
        $(".daftar_adopsi_ext_name").hide();
        if (jalur_perumusan == 2 && jenis_perumusan < 5) {

            $(".daftar_adopsi").slideDown("fast", function () {
                $(".daftar_adopsi_ext").show();
                $(".daftar_adopsi_ext_name").hide();
            });
        } else {
            $(".daftar_adopsi").slideUp("fast", function () {
                $(".daftar_adopsi_ext").hide();
                $(".daftar_adopsi_ext_name").hide();
            });
        }
    }
    function pilih_jenis_adopsi(ini) {
        var res = parseInt($(ini).val());
        $(".daftar_adopsi_ext").slideDown("fast", function () {
            if (res == 1) {
                $('.jenis_name').html('Identik');
                $(".daftar_adopsi_ext_name").show('fast');
            } else if (res == 2) {
                $('.jenis_name').html('Modifikasi');
                $(".daftar_adopsi_ext_name").show('fast');
            }
        });

    }
    function sethakpaten() {
        var value = $('input[name="PROPOSAL_IS_HAK_PATEN"]:checked').val();
        if (value == 0) {
            $('#PROPOSAL_IS_HAK_PATEN_DESC').prop("readonly", true);
        } else {
            $('#PROPOSAL_IS_HAK_PATEN_DESC').prop("readonly", false);
            $('#PROPOSAL_IS_HAK_PATEN_DESC').val('');
        }
    }
    jQuery(document).ready(function () {
        $("#PROPOSAL_ADOPSI_NOMOR_JUDUL").select2({
            tags: true,
            multiple: true,
            allowClear: false,
            tokenSeparators: [","],
            width: '100%',
            ajax: {
                url: '/Pengajuan/Usulan/FindNonSNIAdopsi',
                dataType: 'json',
                data: function (params) {
                    return {
                        q: params.term,
                        page: params.page
                    };
                },
                processResults: function (data, params) {
                    params.page = params.page || 1;
                    return {
                        results: data.sni,
                        pagination: {
                            more: (params.page * 10) < data.total_count
                        }
                    };
                },
                cache: true
            },
        });
        $("#PROPOSAL_REV_MERIVISI_ID").select2({
            multiple: true,
            allowClear: false,
            width: '100%',
            ajax: {
                url: '/Pengajuan/Usulan/FindSNI',
                dataType: 'json',
                data: function (params) {
                    return {
                        q: params.term,
                        page: params.page
                    };
                },
                processResults: function (data, params) {
                    params.page = params.page || 1;
                    return {
                        results: data.sni,
                        pagination: {
                            more: (params.page * 10) < data.total_count
                        }
                    };
                },
                cache: true
            },
        });
        $("#PROPOSAL_RALAT_SNI_ID").select2({
            width: '100%',
            ajax: {
                url: '/Pengajuan/Usulan/FindSNI',
                dataType: 'json',
                data: function (params) {
                    return {
                        q: params.term, // search term
                        page: params.page
                    };
                },
                processResults: function (data, params) {
                    params.page = params.page || 1;
                    return {
                        results: data.sni,
                        pagination: {
                            more: (params.page * 10) < data.total_count
                        }
                    };
                },
                cache: true
            },
        });
        $("#PROPOSAL_AMD_SNI_ID").select2({
            width: '100%',
            ajax: {
                url: '/Pengajuan/Usulan/FindSNI',
                dataType: 'json',
                data: function (params) {
                    return {
                        q: params.term, // search term
                        page: params.page
                    };
                },
                processResults: function (data, params) {
                    params.page = params.page || 1;
                    return {
                        results: data.sni,
                        pagination: {
                            more: (params.page * 10) < data.total_count
                        }
                    };
                },
                cache: true
            },
        });
        $("#PROPOSAL_TERJEMAHAN_SNI_ID").select2({
            width: '100%',
            ajax: {
                url: '/Pengajuan/Usulan/FindSNI',
                dataType: 'json',
                data: function (params) {
                    return {
                        q: params.term, // search term
                        page: params.page
                    };
                },
                processResults: function (data, params) {
                    params.page = params.page || 1;
                    return {
                        results: data.sni,
                        pagination: {
                            more: (params.page * 10) < data.total_count
                        }
                    };
                },
                cache: true
            },
        });
        $("#PROPOSAL_REF_SNI_ID").select2({
            allowClear: true,
            ajax: {
                url: '/Pengajuan/Usulan/FindSNI',
                dataType: 'json',
                data: function (params) {
                    return {
                        q: params.term, // search term
                        page: params.page
                    };
                },
                processResults: function (data, params) {
                    params.page = params.page || 1;
                    return {
                        results: data.sni,
                        pagination: {
                            more: (params.page * 10) < data.total_count
                        }
                    };
                },
                cache: true,
            },
        });


        $("#PROPOSAL_REF_NON_SNI").select2({
            allowClear: true,
            ajax: {
                url: '/Pengajuan/Usulan/FindNonSNI',
                dataType: 'json',
                data: function (params) {
                    return {
                        q: params.term, // search term
                        page: params.page
                    };
                },
                processResults: function (data, params) {
                    params.page = params.page || 1;
                    return {
                        results: data.sni,
                        pagination: {
                            more: (params.page * 10) < data.total_count
                        }
                    };
                },
                cache: true
            },
        });
        $("#BIBLIOGRAFI").select2({
            allowClear: true,
            ajax: {
                url: '/Pengajuan/Usulan/FindBIBLIOGRAFI',
                dataType: 'json',
                data: function (params) {
                    return {
                        q: params.term, // search term
                        page: params.page
                    };
                },
                processResults: function (data, params) {
                    params.page = params.page || 1;
                    return {
                        results: data.sni,
                        pagination: {
                            more: (params.page * 10) < data.total_count
                        }
                    };
                },
                cache: true
            },
        });

    });
</script>

<script type="text/javascript">

    function setujuiulusan(id) {
        bootbox.dialog({
            message: "Anda yakin menyetujui usulan ini ?",
            title: "Konfirmasi Persetujuan Usulan Baru",
            buttons: {
                success: {
                    label: "Yakin",
                    className: "green",
                    callback: function () {
                        bukaloading();
                        var formData = { PROPOSAL_ID: id };
                        $.ajax({
                            type: 'POST',
                            url: "/Pengajuan/Usulan/ApprovalUsulanSave",
                            contentType: "application/json",
                            dataType: 'json',
                            data: JSON.stringify(formData)
                        }).done(function (data) {
                            $.when(tutuploading()).then(window.location = "/Pengajuan/Usulan");
                        });
                    }
                },
                danger: {
                    label: "Batal",
                    className: "red",
                    callback: function () {

                    }
                }
            }
        });
    }
    function tolakulusan(id) {
        bootbox.dialog({
            message: "Masukan alasan penolakan usulan ini<br><br><div class='form-group'><textarea placeholder='Alasan Penolakan' class='form-control' id='tolakreason'></textarea></div>",
            title: "Konfirmasi Penolakan Usulan Baru",
            buttons: {
                success: {
                    label: "Yakin",
                    className: "green",
                    callback: function () {
                        bukaloading();
                        var REASON = $('#tolakreason').val();
                        var formData = { PROPOSAL_ID: id, PROPOSAL_REASON: REASON };
                        $.ajax({
                            type: 'POST',
                            url: "/Pengajuan/Usulan/ApprovalUsulanReject",
                            contentType: "application/json",
                            dataType: 'json',
                            data: JSON.stringify(formData)
                        }).done(function (data) {
                            $.when(tutuploading()).then(window.location = "/Pengajuan/Usulan");
                        });
                    }
                },
                danger: {
                    label: "Batal",
                    className: "red",
                    callback: function () {

                    }
                }
            }
        });
    }
</script>
